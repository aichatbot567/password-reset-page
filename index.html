<!DOCTYPE html>
<html>
<head>
  <title>Reset Password</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
</head>
<body>
  <h2>Reset your password</h2>
  <form id="reset-form">
    <input type="password" id="new-password" placeholder="New Password" required />
    <button type="submit">Reset Password</button>
  </form>
  <div id="message"></div>
  <script>
    const supabase = supabase.createClient('https://lwzbmsrhcaigmakugjlh.supabase.co', 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imx3emJtc3JoY2FpZ21ha3VnamxoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDMwODU1ODcsImV4cCI6MjA1ODY2MTU4N30.YZznPrsmuU4o9mo4F0ixCBW_VtRdpFIysfH0Qh4XxDo');

    document.getElementById('reset-form').onsubmit = async (e) => {
      e.preventDefault();
      const params = new URLSearchParams(window.location.hash.substr(1));
      const access_token = params.get('access_token');
      if (!access_token) {
        document.getElementById('message').textContent = 'Invalid or expired reset link.';
        return;
      }
      await supabase.auth.setSession({ access_token, refresh_token: params.get('refresh_token') });
      const { error } = await supabase.auth.updateUser({ password: document.getElementById('new-password').value });
      if (error) {
        document.getElementById('message').textContent = error.message;
      } else {
        document.getElementById('message').textContent = 'Password updated! You can now log in.';
      }
    };
  </script>
</body>
</html>
